# Java内存区域

![](/assets/2012101820014328.jpg)

* ### 程序计数器（Program Counter Register）：记录当前线程所执行字节码的行号指示器。字节码解释器工作时，判断是循环，分支，跳转，异常等条件，然后更新这个计数器的值来选取下一条要执行的指令。

  * ### 这个部分是线程私有的，各线程之间不会相互影响
* ### Java虚拟机栈（JVM Stacks）：是Java方法执行的内存模型，每个方法在执行中会创建一个栈帧，用于存储局部变量表，操作数栈，动态链接，方法出口等信息。如果该方法中调用了别的方法，相当于新方法入栈；而方法执行完成后，相当于该方法出栈。

  * ### 这个部分也是线程私有的
  * ### 局部变量表存放原始类型和引用对象的指针。所需的内存空间在编译时就确定了。
* ### 本地方法栈（Native Method Stack）：与Java虚拟机栈类似，不过是存放Native方法的栈帧。
* ### Java堆（Java Heap）：是Java虚拟机所管理的内存中最大的一块。用于存放对象实例，几乎所有对象实例在这里分配内存。

  * ### Java堆是所有线程共享的一块内存区域。
  * ### 这里是垃圾收集器管理的主要区域，也被称为GC堆。
  * ### 还可以细分为新生代和老生代。见垃圾收集
* ### 方法区（Method Area）：用于存储已被虚拟机加载的类信息，常量，静态变量，即时编译器编译后的代码等数据。这块内存可以选择不实现垃圾收集，但有时也是很重要的，主要针对常量池的回收和对类型的卸载。

  * ### 所有线程共享的内存
  * ### 运行时常量池（Runtime Constant Pool）：是方法区的一部分 ，用于存放编译器生成的各种字面量和符号引用。
* ### 直接内存：不属于Java内存，但NIO中的Buffer和Channal，可以使用Native函数库来直接分配堆外内存。



